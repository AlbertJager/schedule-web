import json
import requests

# emoji_dict = {
#     # ะะท ะฟะตัะฒะพะณะพ ัะปะพะฒะฐัั (ั ะทะฐะณะปะฐะฒะฝัะผะธ ะฑัะบะฒะฐะผะธ)
#     "ะัะพะทะฐ ั ัะปะฐะฑัะผ ะดะพะถะดะตะผ": "๐ฉ๏ธ",
#     "ะัะพะทะฐ ั ะดะพะถะดะตะผ": "โ๏ธ",
#     "ะัะพะทะฐ ั ัะธะปัะฝัะผ ะดะพะถะดะตะผ": "โ๏ธ",
#     "ะกะปะฐะฑะฐั ะณัะพะทะฐ": "๐ฉ๏ธ",
#     "ะัะพะทะฐ": "โ๏ธ",
#     "ะกะธะปัะฝะฐั ะณัะพะทะฐ": "โ๏ธ",
#     "ะะตัะพะฒะฝะฐั ะณัะพะทะฐ": "โ๏ธ",
#     "ะัะพะทะฐ ัะพ ัะปะฐะฑะพะน ะผะพัะพััั": "๐ฉ๏ธ",
#     "ะัะพะทะฐ ั ะผะพัะพััั": "๐ฉ๏ธ",
#     "ะัะพะทะฐ ั ัะธะปัะฝะพะน ะผะพัะพััั": "๐ฉ๏ธ",
#     "ะกะปะฐะฑะฐั ะผะพัะพัั": "๐ฆ๏ธ",
#     "ะะพัะพัั": "๐ง",
#     "ะกะธะปัะฝะฐั ะผะพัะพัั": "๐ง๏ธ",
#     "ะะพัะพัั ัะพ ัะปะฐะฑัะผ ะดะพะถะดะตะผ": "๐ฆ๏ธ",
#     "ะะพัะพัั ั ะดะพะถะดะตะผ": "๐ฆ๏ธ",
#     "ะกะธะปัะฝะฐั ะผะพัะพัั ั ะดะพะถะดะตะผ": "๐ง๏ธ",
#     "ะะธะฒะตะฝั ั ะผะพัะพััั": "๐ฆ๏ธ",
#     "ะกะธะปัะฝัะน ะปะธะฒะตะฝั ั ะผะพัะพััั": "๐ง๏ธ",
#     "ะะธะฒะฝะตะฒะฐั ะผะพัะพัั": "๐ฆ๏ธ",
#     "ะกะปะฐะฑัะน ะดะพะถะดั": "๐ฆ๏ธ",
#     "ะฃะผะตัะตะฝะฝัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะกะธะปัะฝัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะัะตะฝั ัะธะปัะฝัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะญะบัััะตะผะฐะปัะฝัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะะพะถะดั": "๐ง๏ธ",
#     "ะะตะดัะฝะพะน ะดะพะถะดั": "๐จ๏ธ",
#     "ะกะปะฐะฑัะน ะปะธะฒะฝะตะฒัะน ะดะพะถะดั": "๐ฆ๏ธ",
#     "ะะธะฒะฝะตะฒัะน ะดะพะถะดั": "๐ฆ๏ธ",
#     "ะกะธะปัะฝัะน ะปะธะฒะฝะตะฒัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะะตัะพะฒะฝัะน ะปะธะฒะฝะตะฒัะน ะดะพะถะดั": "๐ง๏ธ",
#     "ะกะปะฐะฑัะน ัะฝะตะณ": "๐จ๏ธ",
#     "ะกะฝะตะณ": "โ๏ธ",
#     "ะกะธะปัะฝัะน ัะฝะตะณ": "โ๏ธ",
#     "ะะพะบััะน ัะฝะตะณ": "๐จ๏ธ",
#     "ะกะปะฐะฑัะน ะปะธะฒะฝะตะฒัะน ะผะพะบััะน ัะฝะตะณ": "๐จ๏ธ",
#     "ะะธะฒะฝะตะฒัะน ะผะพะบััะน ัะฝะตะณ": "๐จ๏ธ",
#     "ะกะปะฐะฑัะน ะดะพะถะดั ัะพ ัะฝะตะณะพะผ": "๐จ๏ธ",
#     "ะะพะถะดั ัะพ ัะฝะตะณะพะผ": "๐จ๏ธ",
#     "ะกะปะฐะฑัะน ะปะธะฒะฝะตะฒัะน ัะฝะตะณ": "๐จ๏ธ",
#     "ะะธะฒะฝะตะฒัะน ัะฝะตะณ": "โ๏ธ",
#     "ะกะธะปัะฝัะน ะปะธะฒะฝะตะฒัะน ัะฝะตะณ": "โ๏ธ",
#     "ะะพัะพัั": "๐ซ๏ธ",
#     "ะัะผ": "๐ซ๏ธ",
#     "ะัะผะบะฐ": "๐ซ๏ธ",
#     "ะัะปัะฝัะต ะฒะธััะธ": "๐ช๏ธ",
#     "ะขัะผะฐะฝ": "๐ซ๏ธ",
#     "ะะปะพัะฝัะน ััะผะฐะฝ": "๐ซ๏ธ",
#     "ะะตัะพะบ": "๐ช๏ธ",
#     "ะัะปั": "๐ซ๏ธ",
#     "ะัะปะบะฐะฝะธัะตัะบะธะน ะฟะตะฟะตะป": "๐",
#     "ะจะบะฒะฐะปั": "๐ช๏ธ",
#     "ะขะพัะฝะฐะดะพ": "๐ช๏ธ",
#     "ะะตััะตะฝะพ": "๐ฌ๏ธ",
#     "ะกะธะปัะฝัะน ะฒะตัะตั": "๐ช๏ธ",
    
#     # ะะท ะฒัะพัะพะณะพ ัะปะพะฒะฐัั (ะดะพะฑะฐะฒะปะตะฝั/ะพะฑะฝะพะฒะปะตะฝั)
#     "ะฏัะฝะพ": "โ๏ธ",
#     "ะะตะฑะพะปััะฐั ะพะฑะปะฐัะฝะพััั": "๐ค๏ธ",
#     "ะะฑะปะฐัะฝะพ ั ะฟัะพััะฝะตะฝะธัะผะธ": "โ",
#     "ะะฐัะผััะฝะพ": "โ๏ธ",
#     "ะัะตะฝั ะถะฐัะบะพ": "๐ฅต",
#     "ะฅะพะปะพะดะฝะพ": "๐ฅถ",
#     "ะะตัะตะผะตะฝะฝะฐั ะพะฑะปะฐัะฝะพััั": "โ",
#     "ะะฐะปะพะพะฑะปะฐัะฝะพ": "โ"
# }


def get_weather(city, API_WEATHER_TOKEN):
    response = requests.get(f'https://api.openweathermap.org/data/2.5/weather?q={city}&units=metric&lang=ru&appid={API_WEATHER_TOKEN}')
    res = json.loads(response.text)
    if response.status_code != 200:
        return (response.status_code, "")
    description = res["weather"][0]["description"].capitalize()
    
    temp = int(res["main"]["temp"])
    return (response.status_code, f'{description} | {temp}ยฐC')